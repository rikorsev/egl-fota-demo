# Platform configuration
add_definitions(-DSTM32L412xx)
set(CONFIG_PLAT_SLOT_INFO_SECTION_SIZE 256)
add_definitions(-DCONFIG_PLAT_SLOT_INFO_SECTION_SIZE=${CONFIG_PLAT_SLOT_INFO_SECTION_SIZE})
set(CONFIG_PLAT_SLOT_INFO_MAGIC_VALUE 0xAA55AA55)
add_definitions(-DCONFIG_PLAT_SLOT_INFO_MAGIC_VALUE=${CONFIG_PLAT_SLOT_INFO_MAGIC_VALUE})
set(CONFIG_PLAT_SLOT_BOOT_ADDR 0x08000000)
set(CONFIG_PLAT_SLOT_A_ADDR 0x08010000)
set(CONFIG_PLAT_SLOT_B_ADDR 0x08018000)
set(CONFIG_PLAT_SLOT_INFO_OFFSET 512)

if(TARGET_SLOT STREQUAL "boot")
    set(CONFIG_PLAT_SLOT_ORIGIN ${CONFIG_PLAT_SLOT_BOOT_ADDR})
    set(CONFIG_PLAT_SLOT_LENGTH 65024)
elseif(TARGET_SLOT STREQUAL "a")
    set(CONFIG_PLAT_SLOT_ORIGIN ${CONFIG_PLAT_SLOT_A_ADDR})
    set(CONFIG_PLAT_SLOT_LENGTH 67072)
elseif(TARGET_SLOT STREQUAL "b")
    set(CONFIG_PLAT_SLOT_ORIGIN ${CONFIG_PLAT_SLOT_B_ADDR})
    set(CONFIG_PLAT_SLOT_LENGTH 67072)
else()
    message(FATAL_ERROR "Wrong target slot")
endif()

if(CONFIG_APP_MINIMAL EQUAL 1)
    set(CONFIG_PLAT_STACK_SIZE 128)
    set(CONFIG_PLAT_HEAP_SIZE 0)
else()
    set(CONFIG_PLAT_STACK_SIZE 1024)
    set(CONFIG_PLAT_HEAP_SIZE 512)
endif()

include(${CMAKE_CURRENT_LIST_DIR}/flags.cmake)

